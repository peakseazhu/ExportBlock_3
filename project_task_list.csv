task_id,stage,title,depends_on,inputs,outputs,verify_steps,acceptance,evidence
T00_ENV_SETUP,ci,环境依赖与预提交配置,,requirements.txt/environment.yml/.pre-commit-config.yaml,requirements.txt/environment.yml/.pre-commit-config.yaml,python -V; pip install -r requirements.txt; pre-commit run -a,可一键安装且 lint 通过,CI 日志
T01_MANIFEST_SCAN,manifest,扫描数据清单,T00_ENV_SETUP,源数据目录,outputs/manifests/run_<ts>.json,python scripts/pipeline_run.py --stages manifest --config configs/default.yaml,文件数一致且 sha256 可复现,outputs/manifests/run_<ts>.json
T02_IAGA_PARSER,ingest,IAGA2002 解析器,T00_ENV_SETUP,地磁/AEF IAGA 文件,outputs/reports/dq_ingest_iaga.json,pytest -m unit -k iaga,rows>0 且 sentinel 标记完整,outputs/reports/dq_ingest_iaga.json
T03_MSEED_INGEST,ingest,MiniSEED ingest,T00_ENV_SETUP,MiniSEED 文件,outputs/reports/dq_ingest_mseed.json,pytest -m unit -k stationxml,trace_count>0 且 start<end,outputs/reports/dq_ingest_mseed.json
T04_STATIONXML_JOIN,ingest,StationXML join,T03_MSEED_INGEST,stations_inventory.xml,outputs/reports/station_match.json,pytest -m unit -k stationxml,matched_ratio>=0.95,outputs/reports/station_match.json
T05_VLF_CDF_INGEST,ingest,VLF CDF ingest,T00_ENV_SETUP,VLF CDF 文件,outputs/raw/vlf/.../spectrogram.zarr; outputs/raw/vlf_catalog.parquet; outputs/reports/dq_ingest_vlf.json,pytest -m unit -k vlf,shape/units/dt_median 合法,outputs/reports/dq_ingest_vlf.json
T06_RAW_STORE,raw,Raw 入库,T02_IAGA_PARSER;T03_MSEED_INGEST;T04_STATIONXML_JOIN,ingest 输出,outputs/raw/.../*.parquet; outputs/reports/dq_raw.json,python scripts/pipeline_run.py --stages ingest,raw --config configs/default.yaml,dq_raw.rows>0; raw 可查询,outputs/reports/dq_raw.json
T07_STANDARD_PREPROCESS,standard,标准化预处理,T06_RAW_STORE,outputs/raw,outputs/standard/.../*.parquet; outputs/reports/dq_standard.json; outputs/reports/filter_effect.json,python scripts/pipeline_run.py --stages standard --config configs/default.yaml,缺失/异常/插值比例可统计,outputs/reports/dq_standard.json
T08_SPATIAL_INDEX,spatial,空间索引,T04_STATIONXML_JOIN,station metadata,outputs/reports/dq_spatial.json,pytest -m unit -k spatial,查询结果一致,outputs/reports/dq_spatial.json
T09_LINK_EVENT,link,事件关联与对齐,T07_STANDARD_PREPROCESS;T08_SPATIAL_INDEX,标准化数据+事件参数,outputs/linked/<event_id>/aligned.parquet; outputs/linked/<event_id>/dq_linked.json,python scripts/pipeline_run.py --stages link --event_id <id>,join_coverage 输出且可解释,outputs/linked/<event_id>/dq_linked.json
T10_FEATURES_EXTRACT,features,特征提取,T09_LINK_EVENT,aligned.parquet,outputs/features/<event_id>/features.parquet; outputs/features/<event_id>/dq_features.json,python scripts/pipeline_run.py --stages features --event_id <id>,特征列齐全,outputs/features/<event_id>/dq_features.json
T11_MODEL_RULEBOOK,model,异常规则模型,T10_FEATURES_EXTRACT,features.parquet,outputs/features/<event_id>/anomaly.parquet; outputs/models/rulebook.yaml; outputs/features/<event_id>/dq_anomaly.json,pytest -m integ -k anomaly,score 合法; 基线降级可追溯,outputs/features/<event_id>/dq_anomaly.json
T12_PLOTS,plots,核心图产物,T09_LINK_EVENT;T11_MODEL_RULEBOOK,aligned/features,outputs/plots/{html,spec}/<event_id>/plot_*.{json,html}; outputs/reports/dq_plots.json,python scripts/pipeline_run.py --stages plots --event_id <id>,>=4 张核心图可渲染,outputs/reports/dq_plots.json
T13_FINALIZE_EVENT,finalize,事件收口,T09_LINK_EVENT;T11_MODEL_RULEBOOK;T12_PLOTS,linked/features/plots,outputs/events/<event_id>/... + DONE/FAIL,python scripts/finalize_event_package.py --event_id <id> --strict,required_missing_count==0 则 DONE,outputs/events/<event_id>/reports/artifacts_manifest.json
T14_EVENT_BUNDLE,finalize,事件打包,T13_FINALIZE_EVENT,outputs/events/<event_id>,outputs/events/<event_id>/event_bundle.zip,python scripts/make_event_bundle.py --event_id <id>,zip 可解压且链接可用,outputs/events/<event_id>/event_bundle.zip
T15_FASTAPI,api,FastAPI 服务,T06_RAW_STORE;T07_STANDARD_PREPROCESS;T09_LINK_EVENT;T11_MODEL_RULEBOOK;T12_PLOTS,outputs/,FastAPI 服务 + /health,pytest -m smoke,接口 200 且字段齐全,pytest 日志
T16_UI_DASHBOARD,ui,UI 仪表盘,T15_FASTAPI,FastAPI 服务,/ui 页面,手工验收,列表 READY; 详情页可渲染,截图/日志
T17_EXPORT,api,导出接口,T15_FASTAPI,aligned.parquet,CSV/HDF5 导出,GET /events/{id}/export,仅导出切片,outputs/events/<event_id>/exports/
T18_DOCS,docs,文档交付,T15_FASTAPI,代码与配置,docs/data_dictionary.md; docs/api.md; docs/task_map.md,文档自检,无死链且与代码一致,docs/*
