pipeline:
  version: "0.1.0"

paths:
  geomag:
    root: "地磁"
    patterns:
      - "*.min"
  aef:
    root: "大气电磁信号/大气电场/kak202001-202010daef.min"
    patterns:
      - "*.min"
  seismic:
    root: "地震波"
    mseed_patterns:
      - "*.mseed"
    sac_patterns:
      - "*.sac"
    stationxml: "地震波/stations_inventory.xml"
  vlf:
    root: "大气电磁信号/电磁波动vlf/vlf"
    patterns:
      - "*.cdf"

outputs:
  root: "outputs"

limits:
  max_files_per_source: 1
  max_rows_per_source: 5000

events:
  - event_id: "eq_20200101_000000"
    name: "2020-01-01 Demo"
    origin_time_utc: "2020-01-01T00:00:00Z"
    lat: 36.232
    lon: 140.186
    depth_km: 34.0
    magnitude: 6.1

time:
  timezone: "UTC"
  align_interval: "1min"
  event_window:
    pre_hours: 24
    post_hours: 12
  align_strategy:
    geomag_min: "no_interpolate"
    aef_min: "no_interpolate"
    seismic_waveform: "feature_then_align"

preprocess:
  outlier:
    method: "zscore"
    threshold: 4.0
  interpolate:
    max_gap_minutes: 5
    method: "linear"
  filter:
    enabled: true
    method: "rolling_mean"
    window: 3
  batch_rows: 20000

link:
  spatial_km: 1000
  require_station_location: false

features:
  rolling_window_minutes: 30
  topn_anomalies: 20

vlf:
  band_edges_hz: [10, 1000, 3000, 10000]
  preview:
    max_time_bins: 120
    max_freq_bins: 120

storage:
  parquet:
    compression: "zstd"
    partition_cols: ["station_id", "date"]
    batch_rows: 20000
  zarr:
    compressor: "zstd"

api:
  host: "0.0.0.0"
  port: 8000
